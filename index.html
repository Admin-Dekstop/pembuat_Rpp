<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator RPP Profesional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for textareas for better aesthetics */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Ensure Inter font is used for overall UI, and Times New Roman for output simulation */
        body {
            font-family: 'Inter', sans-serif;
        }
        #generatedRpp {
            font-family: 'Times New Roman', serif; /* For output area to simulate Word */
            line-height: 1.5; /* Standard line spacing in Word */
            white-space: pre-wrap; /* Preserve spaces and line breaks */
            tab-size: 8; /* Ensure tabs are rendered consistently in textarea preview (0.5 inch default in Word) */
            -moz-tab-size: 8;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">

    <div class="max-w-6xl mx-auto bg-white p-8 rounded-xl shadow-2xl space-y-8">
        <h1 class="text-4xl font-extrabold text-center text-indigo-800 mb-8">
            ‚ú® Generator RPP Profesional ‚ú®
        </h1>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

            <div class="col-span-full bg-blue-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-blue-700 mb-4">I. Identitas RPP dan Informasi Umum</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="namaSekolah" class="block text-gray-700 text-sm font-semibold mb-2">Nama Sekolah</label>
                        <input type="text" id="namaSekolah" name="namaSekolah" placeholder="SMP Negeri 1 Jaya Raya" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="mataPelajaran" class="block text-gray-700 text-sm font-semibold mb-2">Mata Pelajaran</label>
                        <input type="text" id="mataPelajaran" name="mataPelajaran" placeholder="Bahasa Indonesia" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="kelasSemester" class="block text-gray-700 text-sm font-semibold mb-2">Kelas / Semester</label>
                        <input type="text" id="kelasSemester" name="kelasSemester" placeholder="VIII / Genap" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="materiPokok" class="block text-gray-700 text-sm font-semibold mb-2">Materi Pokok</label>
                        <input type="text" id="materiPokok" name="materiPokok" placeholder="Teks Persuasi" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="alokasiWaktu" class="block text-gray-700 text-sm font-semibold mb-2">Alokasi Waktu</label>
                        <input type="text" id="alokasiWaktu" name="alokasiWaktu" placeholder="3 x 45 menit (3 JP)" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="namaGuru" class="block text-gray-700 text-sm font-semibold mb-2">Nama Guru</label>
                        <input type="text" id="namaGuru" name="namaGuru" placeholder="Nama Lengkap Guru Anda, S.Pd." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="nipGuru" class="block text-gray-700 text-sm font-semibold mb-2">NIP Guru</label>
                        <input type="text" id="nipGuru" name="nipGuru" placeholder="198501012010011002" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="tahunPelajaran" class="block text-gray-700 text-sm font-semibold mb-2">Tahun Pelajaran</label>
                        <input type="text" id="tahunPelajaran" name="tahunPelajaran" placeholder="2024/2025" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                </div>
            </div>

            <div class="col-span-full bg-green-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-green-700 mb-4">II. Tujuan Pembelajaran</h2>
                <div class="mb-4">
                    <label for="tujuanPembelajaran" class="block text-gray-700 text-sm font-semibold mb-2">Tuliskan tujuan pembelajaran Anda, pisahkan dengan baris baru. (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="tujuanPembelajaran" name="tujuanPembelajaran" rows="6" placeholder="- Setelah mengikuti proses pembelajaran, peserta didik diharapkan mampu:
- Menganalisis struktur teks persuasi dengan tepat.
- Menyajikan teks persuasi secara lisan dengan percaya diri.
- Menunjukkan sikap kolaboratif dalam kerja kelompok." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-yellow-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-yellow-700 mb-4">III. Kompetensi Inti (KI) dan Kompetensi Dasar (KD)</h2>
                <div class="mb-4">
                    <label for="kompetensiInti" class="block text-gray-700 text-sm font-semibold mb-2">Kompetensi Inti (KI) - Sudah terisi default, bisa diedit.</label>
                    <textarea id="kompetensiInti" name="kompetensiInti" rows="8" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
                <div class="mb-4">
                    <label for="kompetensiDasar" class="block text-gray-700 text-sm font-semibold mb-2">Kompetensi Dasar (KD) (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="kompetensiDasar" name="kompetensiDasar" rows="3" placeholder="- 3.4 Menganalisis latar belakang kedatangan bangsa-bangsa Barat ke Indonesia.
- 4.4 Menyajikan hasil analisis latar belakang dan jalur kedatangan bangsa-bangsa Barat ke Indonesia." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-purple-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-purple-700 mb-4">IV. Indikator Pencapaian Kompetensi (IPK)</h2>
                <div class="mb-4">
                    <label for="indikatorPencapaian" class="block text-gray-700 text-sm font-semibold mb-2">Indikator Pencapaian Kompetensi (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="indikatorPencapaian" name="indikatorPencapaian" rows="5" placeholder="- Indikator Pengetahuan (dari KD 3.X):
- 3.X.1 Mengidentifikasi motivasi 3G.
- Indikator Keterampilan (dari KD 4.X):
- 4.X.1 Membuat peta jalur pelayaran." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-orange-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-orange-700 mb-4">V. Materi Pembelajaran</h2>
                <div class="mb-4">
                    <label for="materiPembelajaran" class="block text-gray-700 text-sm font-semibold mb-2">Materi Pembelajaran (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="materiPembelajaran" name="materiPembelajaran" rows="6" placeholder="- Latar Belakang Kedatangan Bangsa Eropa:
- Faktor Pendorong (3G: Gold, Glory, Gospel).
- Perkembangan Ilmu Pengetahuan dan Teknologi.
- Jalur Kedatangan Bangsa Eropa:
- Jalur pelayaran bangsa Portugis, Spanyol, Belanda, dan Inggris." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-teal-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-teal-700 mb-4">VI. Metode Pembelajaran</h2>
                <div class="mb-4">
                    <label for="metodePembelajaran" class="block text-gray-700 text-sm font-semibold mb-2">Metode Pembelajaran (Pendekatan, Model, Metode, Media, Alat/Bahan) (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="metodePembelajaran" name="metodePembelajaran" rows="6" placeholder="- Pendekatan: Saintifik
- Model Pembelajaran: Discovery Learning
- Metode: Diskusi kelompok, tanya jawab, penugasan.
- Media: Peta dunia, video singkat, Power Point.
- Alat/Bahan: Laptop, proyektor, LKPD." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-cyan-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-cyan-700 mb-4">VII. Kegiatan Pembelajaran</h2>
                <div class="mb-4">
                    <label for="kegiatanPendahuluan" class="block text-gray-700 text-sm font-semibold mb-2">A. Pendahuluan (Gunakan angka untuk daftar)</label>
                    <textarea id="kegiatanPendahuluan" name="kegiatanPendahuluan" rows="6" placeholder="1. Guru mengucapkan salam, berdoa, dan mengecek kehadiran.
2. Apersepsi: Guru menampilkan gambar rempah-rempah.
3. Motivasi: Guru menyampaikan manfaat belajar.
4. Guru menyampaikan tujuan pembelajaran." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
                <div class="mb-4">
                    <label for="kegiatanInti" class="block text-gray-700 text-sm font-semibold mb-2">B. Kegiatan Inti (Gunakan angka atau tanda - untuk daftar)</label>
                    <textarea id="kegiatanInti" name="kegiatanInti" rows="10" placeholder="- Fase 1: Pemberian Rangsangan (Stimulation)
    1.  Guru menayangkan video/infografis.
    2.  Peserta didik mengamati dan merumuskan pertanyaan.
- Fase 2: Pernyataan/Identifikasi Masalah (Problem Statement)
    1.  Peserta didik merumuskan pertanyaan.
- [Lanjutkan fase-fase model pembelajaran Anda...]" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
                <div class="mb-4">
                    <label for="kegiatanPenutup" class="block text-gray-700 text-sm font-semibold mb-2">C. Penutup (Gunakan angka untuk daftar)</label>
                    <textarea id="kegiatanPenutup" name="kegiatanPenutup" rows="6" placeholder="1. Guru dan peserta didik refleksi.
2. Guru memberikan umpan balik.
3. Guru memberikan penugasan.
4. Guru menutup pembelajaran dengan doa dan salam." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-pink-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-pink-700 mb-4">VIII. Penilaian Pembelajaran</h2>
                <div class="mb-4">
                    <label for="penilaianPembelajaran" class="block text-gray-700 text-sm font-semibold mb-2">Penilaian Pembelajaran (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="penilaianPembelajaran" name="penilaianPembelajaran" rows="6" placeholder="- 1. Penilaian Sikap: Observasi, Lembar Observasi.
- 2. Penilaian Pengetahuan: Tes Tertulis, Soal Uraian/PG.
- 3. Penilaian Keterampilan: Produk (Peta), Rubrik Penilaian Peta." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-lime-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-lime-700 mb-4">IX. Remedial dan Pengayaan</h2>
                <div class="mb-4">
                    <label for="remedialPengayaan" class="block text-gray-700 text-sm font-semibold mb-2">Remedial dan Pengayaan (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="remedialPengayaan" name="remedialPengayaan" rows="5" placeholder="- Remedial: Bimbingan individual/kelompok, tugas tambahan.
- Pengayaan: Studi kasus, proyek mandiri." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-indigo-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-indigo-700 mb-4">X. Sumber Belajar</h2>
                <div class="mb-4">
                    <label for="sumberBelajar" class="block text-gray-700 text-sm font-semibold mb-2">Sumber Belajar (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="sumberBelajar" name="sumberBelajar" rows="5" placeholder="- Buku Teks: Kemendikbud. (2017). Buku Siswa [Mata Pelajaran] Kelas [Kelas].
- Internet: https://www.youtube.com/......
- Lingkungan sekitar." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-fuchsia-50 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-fuchsia-700 mb-4">XI. Lampiran</h2>
                <div class="mb-4">
                    <label for="lampiran" class="block text-gray-700 text-sm font-semibold mb-2">Lampiran (Gunakan tanda - atau angka untuk daftar)</label>
                    <textarea id="lampiran" name="lampiran" rows="4" placeholder="- 1. Materi Ajar
- 2. Lembar Kerja Peserta Didik (LKPD)
- 3. Instrumen Penilaian" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-y"></textarea>
                </div>
            </div>

            <div class="col-span-full bg-gray-100 p-6 rounded-lg shadow-inner">
                <h2 class="text-2xl font-bold text-gray-700 mb-4">XII. Pengesahan</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="kotaTanggal" class="block text-gray-700 text-sm font-semibold mb-2">Kota, Tanggal RPP Dibuat</label>
                        <input type="text" id="kotaTanggal" name="kotaTanggal" placeholder="[Kota/Kabupaten], [Tanggal RPP dibuat]" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="namaKepalaSekolah" class="block text-gray-700 text-sm font-semibold mb-2">Nama Lengkap Kepala Sekolah</label>
                        <input type="text" id="namaKepalaSekolah" name="namaKepalaSekolah" placeholder="Nama Lengkap Kepala Sekolah Anda, M.Pd." class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                    <div class="mb-4">
                        <label for="nipKepalaSekolah" class="block text-gray-700 text-sm font-semibold mb-2">NIP Kepala Sekolah</label>
                        <input type="text" id="nipKepalaSekolah" name="nipKepalaSekolah" placeholder="197005102000031001" class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200">
                    </div>
                </div>
            </div>
        </div>

        <button id="generateRppBtn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform transition-transform duration-200 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50 text-xl">
            üìù GENERATE RPP SEKARANG!
        </button>

        <div id="rppOutputSection" class="mt-8 bg-gray-50 p-6 rounded-xl shadow-inner border border-gray-200 hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Hasil RPP Anda (Siap Tempel di Word/Google Docs)</h2>
            <textarea id="generatedRpp" class="w-full h-96 p-4 border border-gray-300 rounded-lg bg-white text-gray-900 leading-relaxed overflow-auto resize-y focus:outline-none focus:ring-2 focus:ring-blue-500" readonly style="white-space: pre-wrap; font-family: 'Times New Roman', serif; line-height: 1.5;"></textarea>
            <button id="copyRppBtn" class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400">
                Salin RPP
            </button>
            <p class="text-sm text-gray-600 mt-2 text-center">
                **PENTING:** Setelah menyalin, buka Microsoft Word/Google Docs. Tempelkan (Paste) teks tersebut. Selanjutnya, guru bisa aktifkan fitur daftar otomatis di Word (jika belum aktif) untuk poin-poin yang diawali dengan tanda strip (-) atau angka. Untuk hasil terbaik, gunakan opsi **"Pertahankan Teks Saja" (Keep Text Only)** atau **"Gabungkan Pemformatan" (Merge Formatting)** jika tersedia saat menempel.
            </p>
        </div>
    </div>

    <script>
        // Object to store all RPP data inputs
        const rppData = {
            namaSekolah: '',
            mataPelajaran: '',
            kelasSemester: '',
            materiPokok: '',
            alokasiWaktu: '',
            namaGuru: '',
            nipGuru: '',
            tahunPelajaran: '',
            tujuanPembelajaran: '',
            kompetensiInti: '',
            kompetensiDasar: '',
            indikatorPencapaian: '',
            materiPembelajaran: '',
            metodePembelajaran: '',
            kegiatanPendahuluan: '',
            kegiatanInti: '',
            kegiatanPenutup: '',
            penilaianPembelajaran: '',
            remedialPengayaan: '',
            sumberBelajar: '',
            lampiran: '',
            namaKepalaSekolah: '',
            nipKepalaSekolah: '',
            kotaTanggal: '',
        };

        // Get references to DOM elements
        const inputFields = document.querySelectorAll('input[type="text"], textarea');
        const generateRppBtn = document.getElementById('generateRppBtn');
        const generatedRppTextArea = document.getElementById('generatedRpp');
        const copyRppBtn = document.getElementById('copyRppBtn');
        const rppOutputSection = document.getElementById('rppOutputSection');

        /**
         * Function to format the current date in Indonesian (e.g., "14 Juni 2025").
         * @returns {string} Formatted date string.
         */
        const getCurrentDateFormatted = () => {
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return today.toLocaleDateString('id-ID', options);
        };

        /**
         * Populates default values for KI and the current date on load.
         */
        const populateDefaultValues = () => {
            // Set default Kompetensi Inti text
            document.getElementById('kompetensiInti').value = `KI-1: Menghargai dan menghayati ajaran agama yang dianutnya.
KI-2: Menunjukkan perilaku jujur, disiplin, tanggung jawab, peduli (toleransi, gotong royong), santun, percaya diri dalam berinteraksi secara efektif dengan lingkungan sosial dan alam dalam jangkauan pergaulan dan keberadaannya.
KI-3: Memahami dan menerapkan pengetahuan (faktual, konseptual, prosedural) berdasarkan rasa ingin tahunya tentang ilmu pengetahuan, teknologi, seni, budaya terkait fenomena dan kejadian tampak mata.
KI-4: Mengolah, menyaji, dan menalar dalam ranah konkret (menggunakan, mengurai, merangkai, memodifikasi, dan membuat) dan ranah abstrak (menulis, membaca, menghitung, menggambar, dan mengarang) sesuai dengan yang dipelajari di sekolah dan sumber lain yang sama dalam sudut pandang/teori.`;

            // Initialize rppData with default values
            inputFields.forEach(input => {
                rppData[input.name] = input.value;
            });
        };

        /**
         * Updates the rppData object when an input field changes.
         * @param {Event} event - The input change event.
         */
        const handleInputChange = (event) => {
            const { name, value } = event.target;
            rppData[name] = value;
        };

        /**
         * Calculates estimated time for RPP sections based on total alokasi waktu.
         * @param {string} alokasiWaktuString - The alokasi waktu string (e.g., "3 x 45 menit (3 JP)").
         * @param {number} percentage - Percentage for the section (e.g., 0.15 for 15%).
         * @returns {string} Estimated time string or placeholder.
         */
        const getEstimatedTime = (alokasiWaktuString, percentage) => {
            const match = alokasiWaktuString.match(/(\d+)\s*x\s*(\d+)/);
            if (match) {
                const numPeriods = parseInt(match[1]);
                const minutesPerPeriod = parseInt(match[2]);
                const totalMinutes = numPeriods * minutesPerPeriod;
                const estimatedMinutes = (totalMinutes * percentage).toFixed(0);
                return `${estimatedMinutes} menit`;
            }
            return '[Estimasi Menit]';
        };

        /**
         * Formats a list string for Word, maintaining indentation and list markers.
         * It attempts to use tab character for indentation for better consistency in Word.
         * It handles bullet points (`- `, `* `) and numbered lists (`1. `, `a. `).
         * This version tries to be smarter about detecting multi-level lists.
         * @param {string} text - The input text, possibly with list items.
         * @returns {string} Formatted string for Word.
         */
        const formatForWordList = (text) => {
            if (!text) return '';
            const lines = text.split('\n');
            let formattedLines = [];

            lines.forEach(line => {
                let trimmedLine = line.trimStart(); // Only trim leading spaces
                let indentLevel = 0;

                // Calculate indentation level from original line's leading spaces
                const leadingSpaces = line.match(/^(\s*)/)[1].length;
                // Assuming 2 or 4 spaces per tab stop in the input. Adjust as needed.
                indentLevel = Math.floor(leadingSpaces / 4); 

                let outputLine = '';

                // Try to detect common list markers and handle them
                // Bullet points: -, *
                if (trimmedLine.match(/^(-|\*)\s/)) {
                    outputLine = '\t'.repeat(indentLevel) + '‚Ä¢ ' + trimmedLine.substring(trimmedLine.match(/^(-|\*)\s/)[0].length).trimStart();
                } 
                // Numbered lists: 1., 2), a., b)
                else if (trimmedLine.match(/^(\d+\.|\d+\)|\w+\.|\w+\))\s/)) {
                    const match = trimmedLine.match(/^(\d+\.|\d+\)|\w+\.|\w+\))\s/);
                    const marker = match[1];
                    const content = trimmedLine.substring(match[0].length).trimStart();
                    outputLine = '\t'.repeat(indentLevel) + marker + ' ' + content;
                }
                else {
                    // If no specific list marker, treat as a normal indented line
                    outputLine = '\t'.repeat(indentLevel) + trimmedLine;
                }
                formattedLines.push(outputLine);
            });
            return formattedLines.join('\n');
        };


        /**
         * Generates the RPP content in a Word-friendly plain text format.
         * @returns {string} The generated RPP string.
         */
        const generateRppWordFriendly = () => {
            const {
                namaSekolah, mataPelajaran, kelasSemester, materiPokok, alokasiWaktu,
                namaGuru, nipGuru, tahunPelajaran, tujuanPembelajaran, kompetensiInti,
                kompetensiDasar, indikatorPencapaian, materiPembelajaran, metodePembelajaran,
                kegiatanPendahuluan, kegiatanInti, kegiatanPenutup, penilaianPembelajaran,
                remedialPengayaan, sumberBelajar, lampiran, namaKepalaSekolah,
                nipKepalaSekolah, kotaTanggal
            } = rppData;

            // Calculate estimated times for sections
            const estimatedPendahuluanTime = getEstimatedTime(alokasiWaktu, 0.15); // 15% for intro
            const estimatedIntiTime = getEstimatedTime(alokasiWaktu, 0.70); // 70% for core
            const estimatedPenutupTime = getEstimatedTime(alokasiWaktu, 0.15); // 15% for closing

            // Determine max label length for precise alignment in "Identitas RPP"
            const labels = [
                'Nama Sekolah', 'Mata Pelajaran', 'Kelas / Semester', 'Materi Pokok',
                'Alokasi Waktu', 'Nama Guru', 'NIP Guru', 'Tahun Pelajaran'
            ];
            const maxLabelLength = Math.max(...labels.map(label => label.length));

            // Helper to pad and align identity fields
            const formatIdentitasLine = (label, value) => {
                // Pad label to max length, then add ': ', then a tab, then value
                return `${label.padEnd(maxLabelLength)}  :\t${value}`;
            };
            
            // Adjusting tabs for the signature block to achieve better right alignment
            // A common approach for roughly centering on the right half in Times New Roman, 12pt on A4
            // is about 8-10 tabs or equivalent spaces. Let's try 9 tabs for better consistency.
            const signatureLineTabCount = 9;
            const signatureTabs = '\t'.repeat(signatureLineTabCount);

            const rppContent = `
                        RENCANA PELAKSANAAN PEMBELAJARAN (RPP)
                        ___________________________________________

I. IDENTITAS RPP DAN INFORMASI UMUM
${formatIdentitasLine('Nama Sekolah', namaSekolah || '[Nama Lengkap Sekolah Anda]')}
${formatIdentitasLine('Mata Pelajaran', mataPelajaran || '[Nama Mata Pelajaran]')}
${formatIdentitasLine('Kelas / Semester', kelasSemester || '[Kelas / Semester]')}
${formatIdentitasLine('Materi Pokok', materiPokok || '[Topik Utama]')}
${formatIdentitasLine('Alokasi Waktu', alokasiWaktu || '[Durasi Waktu]')}
${formatIdentitasLine('Nama Guru', namaGuru || '[Nama Lengkap Guru Anda, S.Pd.]')}
${formatIdentitasLine('NIP Guru', nipGuru || '[NIP Guru Anda, jika ada]')}
${formatIdentitasLine('Tahun Pelajaran', tahunPelajaran || '[Tahun Ajaran]')}

---

II. TUJUAN PEMBELAJARAN
${formatForWordList(tujuanPembelajaran || `- Setelah mengikuti proses pembelajaran, peserta didik diharapkan mampu:
\t- [Isi Tujuan Pembelajaran 1]
\t- [Isi Tujuan Pembelajaran 2]
\t- [Isi Tujuan Pembelajaran 3]`)
}

---

III. KOMPETENSI INTI (KI) dan KOMPETENSI DASAR (KD)
Kompetensi Inti (KI):
${formatForWordList(kompetensiInti || `KI-1: Menghargai dan menghayati ajaran agama yang dianutnya.
KI-2: Menunjukkan perilaku jujur, disiplin, tanggung jawab, peduli (toleransi, gotong royong), santun, percaya diri dalam berinteraksi secara efektif dengan lingkungan sosial dan alam dalam jangkauan pergaulan dan keberadaannya.
KI-3: Memahami dan menerapkan pengetahuan (faktual, konseptual, prosedural) berdasarkan rasa ingin tahunya tentang ilmu pengetahuan, teknologi, seni, budaya terkait fenomena dan kejadian tampak mata.
KI-4: Mengolah, menyaji, dan menalar dalam ranah konkret (menggunakan, mengurai, merangkai, memodifikasi, dan membuat) dan ranah abstrak (menulis, membaca, menghitung, menggambar, dan mengarang) sesuai dengan yang dipelajari di sekolah dan sumber lain yang sama dalam sudut pandang/teori.`)
}

Kompetensi Dasar (KD):
${formatForWordList(kompetensiDasar || `- 3.X. [Bunyi KD Pengetahuan]
- 4.X. [Bunyi KD Keterampilan]`)}

---

IV. INDIKATOR PENCAPAIAN KOMPETENSI (IPK)
${formatForWordList(indikatorPencapaian || `- Indikator Pengetahuan (dari KD 3.X):
\t- 3.X.1 Mengidentifikasi motivasi 3G.
- Indikator Keterampilan (dari KD 4.X):
\t- 4.X.1 Membuat peta jalur pelayaran.`)}

---

V. MATERI PEMBELAJARAN
${formatForWordList(materiPembelajaran || `- Latar Belakang Kedatangan Bangsa Eropa:
\t- Faktor Pendorong (3G: Gold, Glory, Gospel).
\t- Perkembangan Ilmu Pengetahuan dan Teknologi.
- Jalur Kedatangan Bangsa Eropa:
\t- Jalur pelayaran bangsa Portugis, Spanyol, Belanda, dan Inggris.`)}

---

VI. METODE PEMBELAJARAN
${formatForWordList(metodePembelajaran || `- Pendekatan: Saintifik
- Model Pembelajaran: Discovery Learning
- Metode: Diskusi kelompok, tanya jawab, penugasan.
- Media: Peta dunia, video singkat, Power Point.
- Alat/Bahan: Laptop, proyektor, LKPD.`)}

---

VII. KEGIATAN PEMBELAJARAN

A. Pendahuluan (${estimatedPendahuluanTime})
${formatForWordList(kegiatanPendahuluan || `1. Guru mengucapkan salam, berdoa, dan mengecek kehadiran.
2. Apersepsi: [Kegiatan mengaitkan materi sebelumnya/pengalaman siswa].
3. Motivasi: [Kegiatan memotivasi siswa].
4. Guru menyampaikan tujuan pembelajaran dan garis besar kegiatan.`)}

B. Kegiatan Inti (${estimatedIntiTime})
${formatForWordList(kegiatanInti || `- Fase 1: Pemberian Rangsangan (Stimulation)
\t1.  Guru menayangkan video/infografis.
\t2.  Peserta didik mengamati dan merumuskan pertanyaan.
- Fase 2: Pernyataan/Identifikasi Masalah (Problem Statement)
\t1.  Peserta didik merumuskan pertanyaan.
- [Lanjutkan fase-fase model pembelajaran Anda...]`)}

C. Penutup (${estimatedPenutupTime})
${formatForWordList(kegiatanPenutup || `1. Guru dan peserta didik melakukan refleksi atas pembelajaran.
2. Guru memberikan umpan balik.
3. Guru memberikan penugasan.
4. Guru menutup pembelajaran dengan doa dan salam.`)}

---

VIII. PENILAIAN PEMBELAJARAN
${formatForWordList(penilaianPembelajaran || `- 1. Penilaian Sikap
\t- Teknik: Observasi
\t- Bentuk Instrumen: Lembar Observasi Sikap
- 2. Penilaian Pengetahuan
\t- Teknik: Tes Tertulis
\t- Bentuk Instrumen: Soal Uraian/Pilihan Ganda
- 3. Penilaian Keterampilan
\t- Teknik: Produk/Kinerja
\t- Bentuk Instrumen: Rubrik Penilaian Produk/Kinerja`)}

---

IX. REMEDIAL DAN PENGAYAAN
${formatForWordList(remedialPengayaan || `- Remedial:
\t- Bagi peserta didik yang belum mencapai KKM, guru memberikan bimbingan atau tugas tambahan.
- Pengayaan:
\t- Bagi peserta didik yang sudah mencapai KKM, guru memberikan materi pengayaan atau tugas proyek.`)}

---

X. SUMBER BELAJAR
${formatForWordList(sumberBelajar || `- Buku Teks: Kemendikbud. (2017). Buku Siswa [Mata Pelajaran] Kelas [Kelas].
- Internet: https://www.youtube.com/...
- Lingkungan sekitar.`)}

---

XI. LAMPIRAN
${formatForWordList(lampiran || `- 1. Materi Ajar
- 2. Lembar Kerja Peserta Didik (LKPD)
- 3. Instrumen Penilaian`)}

---

XII. PENGESAHAN

${kotaTanggal || '[Kota/Kabupaten], ' + getCurrentDateFormatted()}

Mengetahui,
Kepala ${namaSekolah || '[Nama Lengkap Sekolah Anda]'}

${namaKepalaSekolah || '[Nama Lengkap Kepala Sekolah Anda], [Gelar]'}
NIP. ${nipKepalaSekolah || '[NIP Kepala Sekolah Anda, jika ada]'}


${signatureTabs}Guru Mata Pelajaran

${signatureTabs}${namaGuru || '[Nama Lengkap Guru Anda], S.Pd.'}
${signatureTabs}NIP. ${nipGuru || '[NIP Guru Anda, jika ada]'}
            `;
            return rppContent;
        };

        /**
         * Event listener for the "Generate RPP" button.
         * Hides the form and displays the generated RPP.
         */
        generateRppBtn.addEventListener('click', () => {
            const rppOutput = generateRppWordFriendly();
            generatedRppTextArea.value = rppOutput;
            rppOutputSection.classList.remove('hidden'); // Show the output section
            // Scroll to the generated RPP section
            rppOutputSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        /**
         * Event listener for the "Copy RPP" button.
         * Copies the content of the generated RPP textarea to the clipboard.
         */
        copyRppBtn.addEventListener('click', () => {
            generatedRppTextArea.select(); // Select the text in the textarea
            try {
                document.execCommand('copy'); // Execute copy command
                copyRppBtn.textContent = 'Disalin!'; // Change button text to indicate success
                setTimeout(() => {
                    copyRppBtn.textContent = 'Salin RPP'; // Reset button text after 2 seconds
                }, 2000);
            } catch (err) {
                console.error('Gagal menyalin teks: ', err);
                copyRppBtn.textContent = 'Gagal menyalin!'; // Indicate failure
            }
        });

        // Add event listeners to all input fields to update rppData
        inputFields.forEach(input => {
            input.addEventListener('input', handleInputChange);
        });

        // Populate default values when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', populateDefaultValues);
    </script>
</body>
</html>
